<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <title>PHP Example - AJAX and XML</title>
    <style>a.menu_html_intro{font-weight:bold;}</style>
    <meta name="viewport" content="width=device-width">
    <meta name="Keywords" content="HTML,CSS,XML,JavaScript,DOM,jQuery,ASP.NET,PHP,SQL,colors,tutorial,programming,development,training,learning,quiz,primer,lessons,reference,w3-examples,source code,tryphps,tips,color table,w3c,cascading style sheets,active server pages,Web building,Webmaster">
    <meta name="Description" content="Free HTML CSS JavaScript DOM jQuery XML AJAX RSS ASP .NET PHP SQL tutorials, references, examples for web building.">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
    <link rel="stylesheet" type="text/css" href="http://www.w3schools.com/stdtheme.css">
    <script>
function showCD(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }  
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getcd.php?q="+str,true);
xmlhttp.send();
}
</script> 
  </head>
  <body>
    <div id="belowTopnav" style="width:auto">
      <div id="page" style="width:auto; padding:30px; margin:10px;">
        <div>
          <div id="main" style="width:auto">
            <h1>PHP Example - <span class="color_h1">AJAX and XML</span></h1>
            <div class="chapter">
              <div class="w3-clear nextprev"> <a class="w3-left w3-btn" href="PHP%20Example%20AJAX%20and%20MySQL.html">«
                  Previous</a> <a class="w3-right w3-btn" href="PHP%20Example%20AJAX%20Live%20Search.html">Next
                  Chapter »</a> </div>
            </div>
            <hr>
            <p class="intro">AJAX 는 XML 파일과 상호 통신을 하는데 사용될 수 있다.</p>
            <hr>
            <h2>AJAX XML Example</h2>
            <p>다음 예는 웹 페이지가 AJAX로 XML 파일로부터 정보를 어떻게 가져올 수 있는 지를 보여 줍니다.:</p>
            <div class="w3-example">
              <h2 class="example">Example</h2>
              <div class="w3-code notranslate">
                <form action="">
                  <select name="cds" onchange="showCD(this.value)">
                    <option value="">Select a CD:</option>
                    <option value="Bob Dylan">Bob Dylan</option>
                    <option value="Bee Gees">Bee Gees</option>
                    <option value="Cat Stevens">Cat Stevens</option>
                  </select>
                </form>
                <br>
                <div id="txtHint">CD info will be listed here...</div>
              </div>
              <br>
            </div>
            <br>
            <hr>
            <h2>Example Explained - The HTML Page</h2>
            <p>사용자가 위의 드롭다운(dropdown) 목록에서 CD를 선택하면, "showCD()"라는 함수가 실행된다. 함수는
              "onchange" 이벤트에 의해서 트리거 된다.:</p>
            <div class="w3-code notranslate">
              <div> &lt;html&gt;<br>
                &lt;head&gt;<br>
                &lt;script&gt;<br>
                function showCD(str)<br>
                {<br>
                if (str=="")<br>
                &nbsp; {<br>
                &nbsp; document.getElementById("txtHint").innerHTML="";<br>
                &nbsp; return;<br>
                &nbsp; } <br>
                if (window.XMLHttpRequest)<br>
                &nbsp; {// code for IE7+, Firefox, Chrome, Opera, Safari<br>
                &nbsp; xmlhttp=new XMLHttpRequest();<br>
                &nbsp; }<br>
                else<br>
                &nbsp; {// code for IE6, IE5<br>
                &nbsp; xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");<br>
                &nbsp; }<br>
                xmlhttp.onreadystatechange=function()<br>
                &nbsp; {<br>
                &nbsp; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)<br>
                &nbsp;&nbsp;&nbsp; {<br>
                &nbsp;&nbsp;&nbsp;
                document.getElementById("txtHint").innerHTML=xmlhttp.responseText;<br>
                &nbsp;&nbsp;&nbsp; }<br>
                &nbsp; }<br>
                xmlhttp.open("GET","getcd.php?q="+str,true);<br>
                xmlhttp.send();<br>
                }<br>
                &lt;/script&gt;<br>
                &lt;/head&gt;<br>
                &lt;body&gt;<br>
                <br>
                &lt;form&gt;<br>
                Select a CD:<br>
                &lt;select name="cds" onchange="showCD(this.value)"&gt;<br>
                &lt;option value=""&gt;Select a CD:&lt;/option&gt;<br>
                &lt;option value="Bob Dylan"&gt;Bob Dylan&lt;/option&gt;<br>
                &lt;option value="Bonnie Tyler"&gt;Bonnie Tyler&lt;/option&gt;<br>
                &lt;option value="Dolly Parton"&gt;Dolly Parton&lt;/option&gt;<br>
                &lt;/select&gt;<br>
                &lt;/form&gt;<br>
                &lt;div id="txtHint"&gt;&lt;b&gt;CD info will be listed
                here...&lt;/b&gt;&lt;/div&gt;<br>
                <br>
                &lt;/body&gt;<br>
                &lt;/html&gt;</div>
            </div>
            <p>showCD() 함수는 다음과 같은 일을 한다. :</p>
            <ul>
              <li>CD 가 선택됬는지 확인한다.</li>
              <li>XMLHttpRequest 객체를 생성</li>
              <li>서버 응답이 준비되었을 때 실행될 함수를 생성.</li>
              <li>서버의 파일에 요청을 보내기</li>
              <li>파라메타(q)가 (드롭다운 목록의 내용과 함께) URL에 추가 된 것을 주목하시오 </li>
            </ul>
            <hr>
            <h2>PHP File</h2>
            <p>위의 JavaScript 에 의해서 호출된 서버의 페이지는 "getcd.php" 라는 PHP 파일입니다.</p>
            <p>"getuser.php" 의 소스 코드는 MySQL 데이타베이스에서 쿼리를 실행하고, 그 결과를 HTML 테이블로
              반환한다.:</p>
            <p>PHP 스크립트는 XML 문서, "<a target="_blank" href="cd_catalog.xml">cd_catalog.xml</a>",
              를 로드하고, XML 파일에 쿼리를 실행하고, 결과를 HTML로 반환한다.:</p>
            <div class="w3-code notranslate">
              <div> &lt;?php<br>
                $q=$_GET["q"];<br>
                <br>
                $xmlDoc = new DOMDocument();<br>
                $xmlDoc-&gt;load("cd_catalog.xml");<br>
                <br>
                $x=$xmlDoc-&gt;getElementsByTagName('ARTIST');<br>
                <br>
                for ($i=0; $i&lt;=$x-&gt;length-1; $i++)<br>
                {<br>
                //Process only element nodes<br>
                if ($x-&gt;item($i)-&gt;nodeType==1)<br>
                &nbsp;&nbsp;{<br>
                &nbsp;&nbsp;if
                ($x-&gt;item($i)-&gt;childNodes-&gt;item(0)-&gt;nodeValue == $q)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;{<br>
                &nbsp;&nbsp;&nbsp;&nbsp;$y=($x-&gt;item($i)-&gt;parentNode);<br>
                &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                &nbsp;&nbsp;}<br>
                }<br>
                <br>
                $cd=($y-&gt;childNodes);<br>
                <br>
                for ($i=0;$i&lt;$cd-&gt;length;$i++)<br>
                { <br>
                //Process only element nodes<br>
                if ($cd-&gt;item($i)-&gt;nodeType==1)<br>
                &nbsp;&nbsp;{<br>
                &nbsp; echo("&lt;b&gt;" . $cd-&gt;item($i)-&gt;nodeName .
                ":&lt;/b&gt; ");<br>
&nbsp;&nbsp;echo($cd-&gt;item($i)-&gt;childNodes-&gt;item(0)-&gt;nodeValue);<br>
                &nbsp;&nbsp;echo("&lt;br&gt;");<br>
                &nbsp;&nbsp;}<br>
                }<br>
                ?&gt; </div>
            </div>
            <p>JavaScript 로부터 PHP 파일로 CD 쿼리가 보내지면, 다음과 같은 일이 발생한다:</p>
            <ol>
              <li>PHP 가&nbsp; XML DOM 객체를 생성한다. </li>
              <li>JavaScript 로부터 보내진 이름과 일치하는 모든 &lt;artist&gt; 요소를 찾는다.</li>
              <li>앨범 정보를 출력한다. ("txtHint" 자리로 보낸다)</li>
            </ol>
            <br>
            <div class="chapter">
              <div class="w3-clear nextprev"> <a class="w3-left w3-btn" href="PHP%20Example%20AJAX%20and%20MySQL.html">«
                  Previous</a> <a class="w3-right w3-btn" href="PHP%20Example%20AJAX%20Live%20Search.html">Next
                  Chapter »</a> </div>
            </div>
            <hr> </div>
        </div>
      </div>
    </div>
  </body>
</html>
