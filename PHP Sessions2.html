<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <title>PHP Sessions</title>
    <style>a.menu_php_sessions{font-weight:bold;}</style>
    <style>
#smallnavContainer {display:none;}
</style> <meta name="viewport" content="width=device-width">
    <meta name="Keywords" content="HTML,CSS,XML,JavaScript,DOM,jQuery,ASP.NET,PHP,SQL,colors,tutorial,programming,development,training,learning,quiz,primer,lessons,reference,examples,source code,demos,tips,color table,w3c,cascading style sheets,active server pages,Web building,Webmaster">
    <meta name="Description" content="Free HTML CSS JavaScript DOM jQuery XML AJAX RSS ASP .NET PHP SQL tutorials, references, examples for web building.">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3855518-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> <script type="text/javascript">
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script> <script type="text/javascript">
googletag.cmd.push(function() {
googletag.defineSlot('/16833175/BottomMediumRectangle', [300, 250], 'div-gpt-ad-1403595829794-0').addService(googletag.pubads());
googletag.defineSlot('/16833175/LargePS', [[723, 280], [723, 400], [728, 280], [728, 400], [728, 450]], 'div-gpt-ad-1403595829794-1').addService(googletag.pubads());
googletag.defineSlot('/16833175/MainLeaderboard', [728, 90], 'div-gpt-ad-1403595829794-2').addService(googletag.pubads());
googletag.defineSlot('/16833175/SmallPS', [[723, 170], [728, 170]], 'div-gpt-ad-1403595829794-4').addService(googletag.pubads());
var adScreenWidth = screen.width;
if (adScreenWidth <= 768) {   
  googletag.defineSlot('/16833175/MobileBottomBanner', [728, 90], 'div-gpt-ad-1403595829794-3').addService(googletag.pubads());
} else { 
  googletag.defineSlot('/16833175/WideSkyScraper', [160, 600], 'div-gpt-ad-1403595829794-5').addService(googletag.pubads());
}
googletag.pubads().setTargeting("content","php");
googletag.pubads().enableSingleRequest();
googletag.enableServices();
});
</script> <link rel="stylesheet" type="text/css" href="http://www.w3schools.com/stdtheme.css">
  </head>
  <body>
    <div id="smallnavContainer">
      <div id="smallnav">
        <div id="menuDIV">
          <hr>
          <hr>
          <hr></div>
        <div id="closeSearchBTN" onclick="hideSearch()">X</div>
        <a href="/default.asp"> </a></div>
    </div>
    <div id="belowTopnav" style="width:auto">
      <div id="page" style="width:auto; padding:30px; margin:10px;">
        <div>
          <div id="main" style="width:auto">
            <h1>PHP <span class="color_h1">Sessions</span></h1>
            <div class="chapter">
              <div class="prev"><a class="chapter" href="php_cookies.asp">«
                  Previous</a></div>
              <div class="next"><a class="chapter" href="PHP%20mail%28%29%20Function.html">Next
                  Chapter »</a></div>
            </div>
            <hr>
            <p class="intro">PHP session 변수는 사용자 세션(session)에 대한 정보나 설정을 변경할 때
              사용된다. Session 변수는 한 사용자에 대한 정보를 저장하고, 한 응용프로그램의 모든 페이지에서 사용할 수
              있습니다. </p>
            <hr>
            <h2>PHP Session <strong>변수</strong></h2>
            <p>한 응용프로그램과 작업을 할 때, 당신은 열고, 몇몇 변경을 한 다음에 닫을 것입니다. 이는 세션에서도
              마찬가지입니다. 컴퓨터는 당신이 누구인지 알고 있습니다. 그리고 당신이 언제 프로그램을 시작하고, 언제 끝냈는 지를
              압니다. 하지만 인터넷에서는 한가지 문제가 있습니다.: HTTP 주소는 상태를 유지하지 않으므로, 웹 서버는 당신이
              누구인지 모르고, 당신이 무엇을 하는 지 모릅니다.&nbsp;</p>
            <p>PHP 세션은 나중에 사용하기 위해서 서버에 사용자 정보(i.e. username, shopping items,
              etc)를 사용자가 저장하여 이 문제를 해결 합니다. 그러나 세션정보는 일시적이며, 사용자가 웹사이트를 떠나면
              삭제된다. 영구적 저장을 할 필요가 있다면, 데이타베이스에 데이터로 저장할 수 있습니다.&nbsp;</p>
            <p>세션은 각 방문자에게 고유한 ID (UID)를 생성하고, 이&nbsp;UID 를 기준으로 변수를 저장하여 작동합니다.
              UID 는 cookie 에 저장하거나, URL에 전달됩니다. </p>
            <p><img class="decoded" alt="http://courses.cs.washington.edu/courses/cse154/14sp/lectures/slides/images/session.gif"
                src="http://courses.cs.washington.edu/courses/cse154/14sp/lectures/slides/images/session.gif"><br>
              <br>
            </p>
            <hr>
            <h2>Starting a PHP Session</h2>
            <p>PHP 세션에 사용자 정보를 저장하기 전에, 먼저 세션을 시작해야 합니다.</p>
            <p><b>Note:</b> <strong>session_start() 함수</strong>는<strong>
                &lt;html&gt; 태그 앞에</strong> 와야 합니다.:</p>
            <div class="code notranslate">
              <div> &lt;?php session_start(); ?&gt;<br>
                <br>
                &lt;html&gt;<br>
                &lt;body&gt;<br>
                <br>
                &lt;/body&gt;<br>
                &lt;/html&gt; </div>
            </div>
            <p>위의 코드는 서버에 사용자 세션을 등록하여, 사용자 정보의 저장을 시작하게 해주고, 사용자 세션에 UID 를
              할당합니다.&nbsp;</p>
            <hr>
            <h2>Storing a Session Variable</h2>
            <p>세션 변수를 저장하고 검색하는 올바른 방법은 PHP $_SESSION 변수를 사용하는 것이다.:</p>
            <div class="code notranslate">
              <div> &lt;?php<br>
                session_start();<br>
                // store session data<br>
                $_SESSION['views']=1;<br>
                ?&gt;<br>
                <br>
                &lt;html&gt;<br>
                &lt;body&gt;<br>
                <br>
                &lt;?php<br>
                //retrieve session data<br>
                echo "Pageviews=". $_SESSION['views'];<br>
                ?&gt;<br>
                <br>
                &lt;/body&gt;<br>
                &lt;/html&gt; </div>
            </div>
            <p>Output:</p>
            <div class="code notranslate">
              <div> Pageviews=1 </div>
            </div>
            <p>아래의 예에서, 우리는 간단한 페이지-뷰(page-views) 카운터를 만듭니다. isset() 함수는 "views"
              변수가 이미 설정되어 있는지 검사합니다. "views" 가 설정되어 있는 경우에는, 우리 카운터를 증가시킬 수
              있습니다. "views" 가 존재하지 않는다면, "views" 변수를 생성하고, 1 로 설정합니다.:</p>
            <div class="code notranslate">
              <div> &lt;?php<br>
                session_start();<br>
                <br>
                if(isset($_SESSION['views']))<br>
                $_SESSION['views']=$_SESSION['views']+1;<br>
                else<br>
                $_SESSION['views']=1;<br>
                echo "Views=". $_SESSION['views'];<br>
                ?&gt; </div>
            </div>
            <br>
            <hr>
            <h2>Destroying a Session</h2>
            <p>일부 세션 데이터를 삭제하고 싶다면, unset() 또는 session_destroy() 함수를 사용할 수 있습니다.</p>
            <p>unset() 함수는 지정된 세션변수를 해제하는데 사용된다.:</p>
            <div class="code notranslate">
              <div> &lt;?php<br>
                session_start();<br>
                if(isset($_SESSION['views']))<br>
                &nbsp; unset($_SESSION['views']);<br>
                ?&gt; </div>
            </div>
            <p>또한 session_destroy() 함수를 호출하여 세션을 완전히 제거할 수 도 있습니다.:</p>
            <div class="code notranslate">
              <div> &lt;?php<br>
                session_destroy();<br>
                ?&gt; </div>
            </div>
            <p><b>Note:</b> session_destroy() 는 당신의 세션을 다시 설정하며, 모든 저장한 세션 데이타를
              잃게 된다.&nbsp; </p>
            <hr>
            <h2>A simple login session example</h2>
            <br>
            아래의 코드(login.php)는 사용자로부터 이름과 password를 입력 받아, 사용자 목록(users.txt)과
            비교하여&nbsp; 확인한 후, 사용자 세션에 login 상태를 저장하고, 본 페이지(page1.php)로 이동합니다 .
            <br>
            <br>
            <div class="code notranslate">
              <div> &lt;!DOCTYPE html&gt;<br>
                &lt;html&gt;<br>
                &nbsp;&nbsp; &nbsp;&lt;head&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;title&gt; Login PHP
                Example &lt;/title&gt;<br>
                &nbsp;&nbsp; &nbsp;&lt;/head&gt;<br>
                &nbsp;&nbsp; &nbsp;&lt;body&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;?php<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if
                (!isset($_POST["submit"])) {<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; ?&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;h1&gt; Login PHP
                Example &lt;/h1&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;form
                action="&lt;?=$_SERVER['PHP_SELF']?&gt;" method="POST"&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; Username : &lt;input
                type="text" name="user"&gt; &lt;br&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; Password : &lt;input
                type="password" name="pass"&gt;&lt;br&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="submit"
                name="submit" value="login"&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;/form&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;?php<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; }<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; else {<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $user =
                check_param("user");<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $pass =
                check_param("pass");<br>
                &nbsp;&nbsp; &nbsp;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                session_start();<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if
                (checkUser($user, $pass)) {<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp; $_SESSION["login"] = $user;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp; header("Location: page-1.php");<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } else
                {<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp; header("Location: login.php");<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; }<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; ?&gt;<br>
                &nbsp;&nbsp; &nbsp;&lt;/body&gt;<br>
                &lt;/html&gt;<br>
                <br>
                &lt;?php<br>
                function check_param($var) {<br>
                &nbsp;&nbsp; &nbsp;if (!isset($_POST[$var]) || $_POST[$var] ==
                "") {<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; die("Error : missing
                required parameter '$var'");<br>
                &nbsp;&nbsp; &nbsp;}<br>
                &nbsp;&nbsp; &nbsp;return trim($_POST[$var]);<br>
                }<br>
                <br>
                function checkUser($user, $pass) {<br>
                &nbsp;&nbsp; &nbsp;$usersfile = "users.txt";<br>
                &nbsp;&nbsp; &nbsp;$granted = false;<br>
                &nbsp;&nbsp; &nbsp;$users =
                explode("\n",file_get_contents($usersfile));<br>
                &nbsp;&nbsp; &nbsp;foreach ($users as $each) {<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; $info =
                explode(":",$each);<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if ( $user ==
                trim($info[0]) &amp;&amp; $pass == trim($info[1]) ) {<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                $granted = true;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; }<br>
                &nbsp;&nbsp; &nbsp;}<br>
                return $granted;<br>
                }&nbsp;&nbsp; &nbsp;<br>
                ?&gt;</div>
            </div>
            <p>아래의 코드(page-1.php)는 login 한 사용자에게 제공하는 본 페이지로서, 세션에 저장된 사용자
              이름(user)을 활용하며,&nbsp; 다른 웹페이지로의 링크와 logout 버튼을 제공한다. </p>
            <p> </p>
            <div class="code notranslate">
              <div> &lt;!DOCTYPE html&gt;<br>
                &lt;?php<br>
                &nbsp;&nbsp;&nbsp; require("top.php");<br>
                ?&gt;<br>
                &lt;html&gt;<br>
                &nbsp;&nbsp; &nbsp;&lt;head&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;meta charset="utf-8"
                /&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;title&gt;Login Sample
                Code &lt;/title&gt;<br>
                &nbsp;&nbsp; &nbsp;&lt;/head&gt;<br>
                &nbsp;&nbsp; &nbsp;&lt;body&gt;<br>
                &nbsp;&nbsp; &nbsp;<br>
                &nbsp;&nbsp; &nbsp;&lt;h1&gt; &lt;?=$_SESSION["login"]?&gt;'s
                Page after logged-in : page 1&lt;/h1&gt;<br>
                <br>
                &nbsp;&nbsp; &nbsp;&lt;ul&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;li&gt; This is page 1
                : one &lt;/li&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;li&gt; This is page 1
                : two &lt;/li&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;li&gt; This is page 1
                : three &lt;/li&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;li&gt; This is page 1
                : four &lt;/li&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;li&gt; This is page 1
                : five &lt;/li&gt;<br>
                &nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br>
                &nbsp;&nbsp; &nbsp;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;a href="page-2.php"
                &gt; go to Page 2 &lt;/a&gt; &lt;br&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;hr&gt;<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;?php<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                require("bottom.php");<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; ?&gt;<br>
                &nbsp;&nbsp; &nbsp;&lt;/body&gt;<br>
                &lt;/html&gt;</div>
            </div>
            <p>아래의 코드(top.php)는&nbsp; 모든 본 페이지(page-1.php)에서 필요로 하는 상단부의 php 파일로
              서, login 상태이면 브라우져에 표시하고, 아니면 다시 login.php 로 가도록 한다.&nbsp;&nbsp; </p>
            <div class="code notranslate">
              <div> &lt;?php<br>
                &nbsp;&nbsp; &nbsp;session_start();<br>
                &nbsp;&nbsp; &nbsp;if (!isset($_SESSION["login"])) {<br>
                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; header("Location:
                login.php");<br>
                &nbsp;&nbsp; &nbsp;}<br>
                ?&gt;</div>
            </div>
            <p>아래의 코드(bottom.php)는&nbsp; 모든 본 페이지(page-1.php)에서 필요로 하는 하단부의 php
              파일로서, logout 버튼을 제공한다. </p>
            <div class="code notranslate">
              <div> &lt;?php<br>
                &nbsp;&nbsp; &nbsp;echo "&lt;a href='logout.php'&gt;&lt;b&gt;Log
                Out&lt;/b&gt;&lt;/a&gt;";<br>
                ?&gt;</div>
            </div>
            <p>아래의 코드(logout.php)는&nbsp; logout 에 사용되며, 다시 login.php 파일을 브라우징한다.
            </p>
            <div class="code notranslate">
              <div> &lt;?php<br>
                session_start();<br>
                session_destroy();<br>
                header("Location: login.php");<br>
                ?&gt;</div>
            </div>
            <br>
            <div class="chapter">
              <div class="prev"><a class="chapter" href="php_cookies.asp">«
                  Previous</a></div>
              <div class="next"><a class="chapter" href="PHP%20mail%28%29%20Function.html">Next
                  Chapter »</a></div>
            </div>
            <hr> </div>
        </div>
      </div>
      <br>
    </div>
  </body>
</html>
