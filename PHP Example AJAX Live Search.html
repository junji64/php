<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <title>PHP Example - AJAX Live Search</title>
    <style>a.menu_html_intro{font-weight:bold;}</style>
    <meta name="viewport" content="width=device-width">
    <meta name="Keywords" content="HTML,CSS,XML,JavaScript,DOM,jQuery,ASP.NET,PHP,SQL,colors,tutorial,programming,development,training,learning,quiz,primer,lessons,reference,w3-examples,source code,tryphps,tips,color table,w3c,cascading style sheets,active server pages,Web building,Webmaster">
    <meta name="Description" content="Free HTML CSS JavaScript DOM jQuery XML AJAX RSS ASP .NET PHP SQL tutorials, references, examples for web building.">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
    <link rel="stylesheet" type="text/css" href="http://www.w3schools.com/stdtheme.css">
        <script>
function showResult(str)
{
if (str.length==0)
  { 
  document.getElementById("livesearch").innerHTML="";
  document.getElementById("livesearch").style.border="0px";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
	{
	document.getElementById("livesearch").innerHTML=xmlhttp.responseText;
	document.getElementById("livesearch").style.border="1px solid #A5ACB2";
	}
  }
xmlhttp.open("GET","livesearch.php?q="+str,true);
xmlhttp.send();
}
</script> <style type="text/css"> 
#livesearch
{ 
margin:0px;
width:194px;         
}
#txt1
{ 
margin:0px;
}        
</style> <style>a.menu_php_ajax_livesearch{font-weight:bold;}</style>
    <meta name="viewport" content="width=device-width">
    <meta name="Keywords" content="HTML,CSS,XML,JavaScript,DOM,jQuery,ASP.NET,PHP,SQL,colors,tutorial,programming,development,training,learning,quiz,primer,lessons,reference,examples,source code,tryphps,tips,color table,w3c,cascading style sheets,active server pages,Web building,Webmaster">
    <meta name="Description" content="Free HTML CSS JavaScript DOM jQuery XML AJAX RSS ASP .NET PHP SQL tutorials, references, examples for web building.">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3855518-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> <script>
<!--
function searchfield_focus(obj)
{
obj.style.color=""
obj.style.fontStyle=""
if (obj.value=="Search w3schools.com")
	{obj.value=""}
}
var addr=document.location.href;
function displayError()
{
document.getElementById("err_url").value=addr;
document.getElementById("err_form").style.display="block";
document.getElementById("err_desc").focus();
hideSent();
}
function hideError()
{
document.getElementById("err_form").style.display="none";
}
function hideSent()
{
document.getElementById("err_sent").style.display="none";
}
function sendErr()
{
var xmlhttp;
var err_url=document.getElementById("err_url").value;
var err_email=document.getElementById("err_email").value;
var err_desc=document.getElementById("err_desc").value;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("POST","/err_sup.asp",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("err_url=" + err_url + "&err_email=" + err_email + "&err_desc=" + escape(err_desc));
document.getElementById("err_desc").value="";
hideError();
document.getElementById("err_sent").style.display="block";
}
//-->
</script>
    
  </head>
  <body>
    <div id="belowTopnav" style="width:auto">
      <div id="page" style="width:auto; padding:30px; margin:10px;">
        <div>
          <div id="main" style="width:auto">
            <h1>PHP Example - <span class="color_h1">AJAX Live
                Search</span></h1>
            <div class="chapter">
              <div class="w3-clear nextprev"> <a class="w3-left w3-btn" href="PHP%20Example%20AJAX%20and%20XML.html">«
                  Previous</a> <a class="w3-right w3-btn" href="PHP%20Example%20AJAX%20RSS%20Reader.html">Next
                  Chapter »</a> </div>
            </div>
            <hr>
            <p class="intro">AJAX 는 더욱 사용자-친화적이고 인터액티브한 검색을 만드는데 사용될 수
              있습니다.&nbsp;</p>
            <hr>
            <h2>AJAX Live Search</h2>
            <p>다음의 예는 당신이 입력하는 동안 검색 결과가 얻어지는&nbsp;라이브 검색(live search)을 보여줍니다.</p>
            <p>라이브 검색은 기존의 검색에 비해서 많은 장점이 있습니다.:</p>
            <ul>
              <li>입력하는 도중에 결과가 표시됩니다.</li>
              <li>계속 입력하면 결과가 축소됩니다.</li>
              <li>결과의 폭이 너무 좁을 경우에는, 더 광범위한 결과를 보기 위해 문자들을 지우면됩니다.</li>
            </ul>
            <p>아래의 입력필드에 W3Schools 페이지를 검색해 보세요:</p>
            <form> <input size="30" onkeyup="showResult(this.value)" type="text">
              <div id="livesearch"> </div>
            </form>
            <p>위의 예의 결과는 XML 파일(<a target="_blank" href="links.xml">links.xml</a>)
              에서 보여진다. 이 예를 작고 간단하게 하기 위해서, 여섯 개의 결과만 보여줍니다.</p>
            <hr>
            <h2>Example Explained - The HTML Page</h2>
            <p>위의 입력 필드에 사용자가 문자를 입력하면, 함수 "showResult()" 가 실행 됩니다. 함수는
              "onkeyup" 이벤트에 의해서 트리거 됩니다.:</p>
            <div class="w3-code notranslate">
              <div> &lt;html&gt;<br>
                &lt;head&gt;<br>
                &lt;script&gt;<br>
                function showResult(str)<br>
                {<br>
                if (str.length==0)<br>
                &nbsp; { <br>
                &nbsp;&nbsp;document.getElementById("livesearch").innerHTML="";<br>
&nbsp;&nbsp;document.getElementById("livesearch").style.border="0px";<br>
                &nbsp; return;<br>
                &nbsp; }<br>
                if (window.XMLHttpRequest)<br>
                &nbsp; {// code for IE7+, Firefox, Chrome, Opera, Safari<br>
                &nbsp; xmlhttp=new XMLHttpRequest();<br>
                &nbsp; }<br>
                else<br>
                &nbsp; {// code for IE6, IE5<br>
                &nbsp; xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");<br>
                &nbsp; }<br>
                xmlhttp.onreadystatechange=function()<br>
                &nbsp; {<br>
                &nbsp; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)<br>
                &nbsp;&nbsp;&nbsp; {<br>
                &nbsp;
&nbsp;&nbsp;document.getElementById("livesearch").innerHTML=xmlhttp.responseText;<br>
                &nbsp;&nbsp;&nbsp;
                document.getElementById("livesearch").style.border="1px solid
                #A5ACB2";<br>
                &nbsp;&nbsp;&nbsp; }<br>
                &nbsp; }<br>
                xmlhttp.open("GET","livesearch.php?q="+str,true);<br>
                xmlhttp.send();<br>
                }<br>
                &lt;/script&gt;<br>
                &lt;/head&gt;<br>
                &lt;body&gt;<br>
                <br>
                &lt;form&gt;<br>
                &lt;input type="text" size="30"
                onkeyup="showResult(this.value)"&gt;<br>
                &lt;div id="livesearch"&gt;&lt;/div&gt;<br>
                &lt;/form&gt;<br>
                <br>
                &lt;/body&gt;<br>
                &lt;/html&gt; </div>
            </div>
            <p>Source code explanation:</p>
            <p>입력 필드가 비어 있으면 (str.length==0), 함수는 livesearch 자리의 내용을 지우고, 함수를
              종료합니다.</p>
            <p>입력 필드가 비어 있지 않으면, showResult() 함수는 다음을 실행합니다. :</p>
            <ul>
              <li>XMLHttpRequest 객체를 생성</li>
              <li>서버 응답이 준비되었을 때 실행될 함수를 생성.</li>
              <li>서버의 파일에 요청(request) 보내기</li>
              <li>파라메타(q)가 (입력필드의 내용과 함께) URL에 추가 된 것을 주목하시오&nbsp;</li>
            </ul>
            <hr>
            <h2>The PHP File</h2>
            <p>위의 JavaScript 에 의해서 호출된 서버의 페이지는 ""livesearch.php" 라는 PHP 파일입니다.</p>
            <p>"livesearch.php" 의 소스 코드는 검색 문자열과 일치하는 제목 문자열들을 XML 파일에서 검색하고 그
              결과를 반환한다. :</p>
            <div class="w3-code notranslate">
              <div> &lt;?php<br>
                $xmlDoc=new DOMDocument();<br>
                $xmlDoc-&gt;load("links.xml");<br>
                <br>
                $x=$xmlDoc-&gt;getElementsByTagName('link');<br>
                <br>
                //get the q parameter from URL<br>
                $q=$_GET["q"];<br>
                <br>
                //lookup all links from the xml file if length of q&gt;0<br>
                if (strlen($q)&gt;0)<br>
                {<br>
                $hint="";<br>
                for($i=0; $i&lt;($x-&gt;length); $i++)<br>
                &nbsp;&nbsp;{<br>
&nbsp;&nbsp;$y=$x-&gt;item($i)-&gt;getElementsByTagName('title');<br>
                &nbsp;&nbsp;$z=$x-&gt;item($i)-&gt;getElementsByTagName('url');<br>
                &nbsp;&nbsp;if ($y-&gt;item(0)-&gt;nodeType==1)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;{<br>
                &nbsp;&nbsp;&nbsp;&nbsp;//find a link matching the search text<br>
                &nbsp;&nbsp;&nbsp;&nbsp;if
                (stristr($y-&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue,$q))<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($hint=="")<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$hint="&lt;a
                href='" . <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$z-&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue
                . <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"'
                target='_blank'&gt;" . <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$y-&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue
                . "&lt;/a&gt;";<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$hint=$hint .
                "&lt;br /&gt;&lt;a href='" . <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$z-&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue
                . <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"'
                target='_blank'&gt;" . <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$y-&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue
                . "&lt;/a&gt;";<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                &nbsp;&nbsp;}<br>
                }<br>
                <br>
                // Set output to "no suggestion" if no hint were found<br>
                // or to the correct values<br>
                if ($hint=="")<br>
                &nbsp;&nbsp;{<br>
                &nbsp;&nbsp;$response="no suggestion";<br>
                &nbsp;&nbsp;}<br>
                else<br>
                &nbsp;&nbsp;{<br>
                &nbsp;&nbsp;$response=$hint;<br>
                &nbsp;&nbsp;}<br>
                <br>
                //output the response<br>
                echo $response;<br>
                ?&gt; </div>
            </div>
            <p>JavaScript 로부터 전송된 텍스트가 있다면 (strlen($q) &gt; 0), 다음과 같이 됩니다.:</p>
            <ul>
              <li>XML 파일을 새로운 XML DOM 객체로 로드한다.</li>
              <li>JavaScript 로부터 보내진 텍스트와 일치하는 것을 찾기위해서 모든 &lt;title&gt; 요소를 따라
                반복한다.&nbsp; </li>
              <li>"$response" 변수에 정확한 url 과 title 를 설정한다. 하나 이상의 일치가 찾아지면, 모든
                일치들을 변수에 추가 한다. </li>
              <li>일치하는 항목이 없으면, $response 변수는 "no suggestion"으로 설정한다. </li>
            </ul>
            <br>
            <div class="chapter">
              <div class="w3-clear nextprev"> <a class="w3-left w3-btn" href="PHP%20Example%20AJAX%20and%20XML.html">«
                  Previous</a> <a class="w3-right w3-btn" href="PHP%20Example%20AJAX%20RSS%20Reader.html">Next
                  Chapter »</a> </div>
            </div>
            <hr> </div>
        </div>
      </div>
    </div>
  </body>
</html>
