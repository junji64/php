<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <title>PHP Example - AJAX RSS Reader</title>
    <style>a.menu_html_intro{font-weight:bold;}</style>
    <meta name="viewport" content="width=device-width">
    <meta name="Keywords" content="HTML,CSS,XML,JavaScript,DOM,jQuery,ASP.NET,PHP,SQL,colors,tutorial,programming,development,training,learning,quiz,primer,lessons,reference,w3-examples,source code,demos,tips,color table,w3c,cascading style sheets,active server pages,Web building,Webmaster">
    <meta name="Description" content="Free HTML CSS JavaScript DOM jQuery XML AJAX RSS ASP .NET PHP SQL tutorials, references, examples for web building.">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
    <link rel="stylesheet" type="text/css" href="http://www.w3schools.com/stdtheme.css">
    <script>
function showRSS(str)
{
if (str.length==0)
  { 
  document.getElementById("rssOutput").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("rssOutput").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getrss.php?q="+str,true);
xmlhttp.send();
}
</script> <style>a.menu_php_ajax_rss_reader{font-weight:bold;}</style>
    <meta name="viewport" content="width=device-width">
    <meta name="Keywords" content="HTML,CSS,XML,JavaScript,DOM,jQuery,ASP.NET,PHP,SQL,colors,tutorial,programming,development,training,learning,quiz,primer,lessons,reference,examples,source code,demos,tips,color table,w3c,cascading style sheets,active server pages,Web building,Webmaster">
    <meta name="Description" content="Free HTML CSS JavaScript DOM jQuery XML AJAX RSS ASP .NET PHP SQL tutorials, references, examples for web building.">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3855518-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> <script>
<!--
function searchfield_focus(obj)
{
obj.style.color=""
obj.style.fontStyle=""
if (obj.value=="Search w3schools.com")
	{obj.value=""}
}
var addr=document.location.href;
function displayError()
{
document.getElementById("err_url").value=addr;
document.getElementById("err_form").style.display="block";
document.getElementById("err_desc").focus();
hideSent();
}
function hideError()
{
document.getElementById("err_form").style.display="none";
}
function hideSent()
{
document.getElementById("err_sent").style.display="none";
}
function sendErr()
{
var xmlhttp;
var err_url=document.getElementById("err_url").value;
var err_email=document.getElementById("err_email").value;
var err_desc=document.getElementById("err_desc").value;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("POST","/err_sup.asp",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("err_url=" + err_url + "&err_email=" + err_email + "&err_desc=" + escape(err_desc));
document.getElementById("err_desc").value="";
hideError();
document.getElementById("err_sent").style.display="block";
}
//-->
</script>
  </head>
  <body>
    <div id="belowTopnav" style="width:auto">
      <div id="page" style="width:auto; padding:30px; margin:10px;">
        <div>
          <div id="main" style="width:auto">
            <h1>PHP Example - <span class="color_h1">AJAX RSS
                Reader</span></h1>
            <div class="chapter">
              <div class="w3-clear nextprev"> <a class="w3-left w3-btn" href="PHP%20Example%20AJAX%20Live%20Search.html">«
                  Previous</a> <a class="w3-right w3-btn" href="PHP%20Example%20AJAX%20Poll.html">Next
                  Chapter »</a> </div>
            </div>
            <hr>
            <p class="intro">RSS 리더는 RSS 피드(Feeds)를 읽는데 사용됩니다.</p>
            <hr>
            <h2>AJAX RSS Reader</h2>
            <p>다음의 예는 RSS-feed 가 웨페이지의 리로딩 없이 로드되는 RSS 리더를 보여줍니다:</p>
            <form>
              <select onchange="showRSS(this.value)">
                <option value="">Select an RSS-feed:</option>
                <option value="Google">Google News</option>
                <option value="MSNBC">MSNBC News</option>
              </select>
            </form>
            <br>
            <div id="rssOutput">RSS-feed 는 여기에 나열 됩니다....</div>
            <hr>
            <h2>Example Explained - The HTML Page</h2>
            <p>사용자가 위의 드롭다운 목록에서 RSS-feed 를 선택하면, "showRSS()" 라 불리는 함수가 실행됩니다.
              함수는 "onchange" 이벤트에 의해서 트리거됩니다.:</p>
            <div class="w3-code notranslate">
              <div> &lt;html&gt;<br>
                &lt;head&gt;<br>
                &lt;script&gt;<br>
                function showRSS(str)<br>
                {<br>
                if (str.length==0)<br>
                &nbsp; { <br>
                &nbsp;&nbsp;document.getElementById("rssOutput").innerHTML="";<br>
                &nbsp; return;<br>
                &nbsp; }<br>
                if (window.XMLHttpRequest)<br>
                &nbsp; {// code for IE7+, Firefox, Chrome, Opera, Safari<br>
                &nbsp; xmlhttp=new XMLHttpRequest();<br>
                &nbsp; }<br>
                else<br>
                &nbsp; {// code for IE6, IE5<br>
                &nbsp; xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");<br>
                &nbsp; }<br>
                xmlhttp.onreadystatechange=function()<br>
                &nbsp; {<br>
                &nbsp; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)<br>
                &nbsp;&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;document.getElementById("rssOutput").innerHTML=xmlhttp.responseText;<br>
                &nbsp;&nbsp;&nbsp; }<br>
                &nbsp; }<br>
                xmlhttp.open("GET","getrss.php?q="+str,true);<br>
                xmlhttp.send();<br>
                }<br>
                &lt;/script&gt;<br>
                &lt;/head&gt;<br>
                &lt;body&gt;<br>
                <br>
                &lt;form&gt;<br>
                &lt;select onchange="showRSS(this.value)"&gt;<br>
                &lt;option value=""&gt;Select an RSS-feed:&lt;/option&gt;<br>
                &lt;option value="Google"&gt;Google News&lt;/option&gt;<br>
                &lt;option value="MSNBC"&gt;MSNBC News&lt;/option&gt;<br>
                &lt;/select&gt;<br>
                &lt;/form&gt;<br>
                &lt;br&gt;<br>
                &lt;div id="rssOutput"&gt;RSS-feed will be listed
                here...&lt;/div&gt;<br>
                &lt;/body&gt;<br>
                &lt;/html&gt; </div>
            </div>
            <p>showRSS() 함수는 다음의 작업을 수행합니다.:</p>
            <ul>
              <li>RSS-feed 가 선택되었는 지를 확인</li>
              <li>XMLHttpRequest 객체를 생성</li>
              <li>서버 응답이 준비 되었을 때 실행될 함수를 생성 </li>
              <li>서버의 파일에 요청을 보내기</li>
              <li>파라메타(q)가 (드롭다운 항목의 내용과 함께) URL에 추가 된 것을 주목하시오</li>
            </ul>
            <hr>
            <h2>The PHP File</h2>
            <p>위의 JavaScript 에 의해서 호출된 서버의 페이지는 ""getrss.php" 라는 PHP 파일입니다.:</p>
            <div class="w3-code notranslate">
              <div> &lt;?php<br>
                //get the q parameter from URL<br>
                $q=$_GET["q"];<br>
                <br>
                //find out which feed was selected<br>
                if($q=="Google")<br>
                &nbsp;&nbsp;{<br>
&nbsp;&nbsp;$xml=("http://news.google.com/news?ned=us&amp;topic=h&amp;output=rss");<br>
                &nbsp;&nbsp;}<br>
                elseif($q=="MSNBC")<br>
                &nbsp;&nbsp;{<br>
&nbsp;&nbsp;$xml=("http://rss.msnbc.msn.com/id/3032091/device/rss/rss.xml");<br>
                &nbsp;&nbsp;}<br>
                <br>
                $xmlDoc = new DOMDocument();<br>
                $xmlDoc-&gt;load($xml);<br>
                <br>
                //get elements from "&lt;channel&gt;"<br>
$channel=$xmlDoc-&gt;getElementsByTagName('channel')-&gt;item(0);<br>
                $channel_title = $channel-&gt;getElementsByTagName('title')<br>
                -&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue;<br>
                $channel_link = $channel-&gt;getElementsByTagName('link')<br>
                -&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue;<br>
                $channel_desc = $channel-&gt;getElementsByTagName('description')<br>
                -&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue;<br>
                <br>
                //output elements from "&lt;channel&gt;"<br>
                echo("&lt;p&gt;&lt;a href='" . $channel_link<br>
                &nbsp;&nbsp;. "'&gt;" . $channel_title . "&lt;/a&gt;");<br>
                echo("&lt;br&gt;");<br>
                echo($channel_desc . "&lt;/p&gt;");<br>
                <br>
                //get and output "&lt;item&gt;" elements<br>
                $x=$xmlDoc-&gt;getElementsByTagName('item');<br>
                for ($i=0; $i&lt;=2; $i++)<br>
                &nbsp;&nbsp;{<br>
&nbsp;&nbsp;$item_title=$x-&gt;item($i)-&gt;getElementsByTagName('title')<br>
&nbsp;&nbsp;-&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue;<br>
&nbsp;&nbsp;$item_link=$x-&gt;item($i)-&gt;getElementsByTagName('link')<br>
&nbsp;&nbsp;-&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue;<br>
&nbsp;&nbsp;$item_desc=$x-&gt;item($i)-&gt;getElementsByTagName('description')<br>
&nbsp;&nbsp;-&gt;item(0)-&gt;childNodes-&gt;item(0)-&gt;nodeValue;<br>
                <br>
                &nbsp;&nbsp;echo ("&lt;p&gt;&lt;a href='" . $item_link<br>
                &nbsp;&nbsp;. "'&gt;" . $item_title . "&lt;/a&gt;");<br>
                &nbsp;&nbsp;echo ("&lt;br&gt;");<br>
                &nbsp;&nbsp;echo ($item_desc . "&lt;/p&gt;");<br>
                &nbsp;&nbsp;}<br>
                ?&gt; </div>
            </div>
            <p>RSS feed 에 대한 요청이 JavaScript 로부터 보내지면, 다음과 같은 일이 발생한다.:</p>
            <ul>
              <li>어느 feed 가 선택되었는지를 확인</li>
              <li>새로운 XML DOM 객체를 생성</li>
              <li>xml 변수에 RSS 문서를 로드</li>
              <li>channel 요소로부터 요소들은 추출 및 출력</li>
              <li>item 요소로부터 요소들은 추출 및 출력</li>
            </ul>
            <br>
            <div class="chapter">
              <div class="w3-clear nextprev"> <a class="w3-left w3-btn" href="PHP%20Example%20AJAX%20Live%20Search.html">«
                  Previous</a> <a class="w3-right w3-btn" href="PHP%20Example%20AJAX%20Poll.html">Next
                  Chapter »</a> </div>
            </div>
            <hr> </div>
        </div>
      </div>
    </div>
  </body>
</html>
